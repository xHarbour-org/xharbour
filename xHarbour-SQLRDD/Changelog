/*
 * $Id$
 */

/* Use this format for the entry headers:
   YYYY-MM-DD HH:MM UTC[-|+]hhmm Your Full Name <your_email@address>
   For example:
   2004-12-01 23:12 UTC+0100 Foo Bar <foo.bar@foobar.org>
*/

2012-01-29 17:12 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * xHarbour-SQLRDD/source/compat.h
    * do not redefine TRUE and FALSE macros if they already exists

  * xHarbour-SQLRDD/source/firebird.c
  * xHarbour-SQLRDD/source/sqlex2.c
  * xHarbour-SQLRDD/source/sqlex3.c
  * xHarbour-SQLRDD/source/sqlsrodbc.c
    * pacified warnings with uninitialized variables

  * xHarbour-SQLRDD/source/sqlact.c
    ! fixed potential GPF traps and memory corruption due to
      uninitialized variables

  * xHarbour-SQLRDD/source/sqlex1.c
    * pacified warnings with uninitialized variables
    * removed redundant bPrepare parameter of getWhereExpression()
      function and modified the code to always initialize index
      when it's necessary for given action.

  * xHarbour-SQLRDD/source/sqlrdd.hbx
    * updated automatically

2012-01-26 11:05 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * xHarbour-SQLRDD/source/mysql.c
    ! added workaround for problems with xHarbour core header files which
      define _WINSOCKAPI_ what effectively breaks compilation of code using
      sockets. It means that it's necessary to include windows.h before
      xHarbour header files.

2012-01-19 02:35 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * xHarbour-SQLRDD/source/compat.h
    * added hbset.h and eliminated hbvmint.h from Harbour builds
    + added few new macros to hide differences in CDP API.

  * xHarbour-SQLRDD/source/firebird.c
  * xHarbour-SQLRDD/source/mysql.c
  * xHarbour-SQLRDD/source/pgs.c
  * xHarbour-SQLRDD/source/sqlex1.c
  * xHarbour-SQLRDD/source/sqlex2.c
  * xHarbour-SQLRDD/source/sqlorax.c
  * xHarbour-SQLRDD/source/sqlrdd1.c
  * xHarbour-SQLRDD/source/sqlsrodbc.c
  * xHarbour-SQLRDD/source/sqlact.c
    * replaced hb_vmPushSymbol() with hb_vmPushDynSym()
    * replaced code directly accessed HB_ITEM internals with
      macros and functions from official [x]Harbour API
    % eliminated some unused C stack HB_ITEM variables.
    ! eliminated rest of C stack HB_ITEM variables. Some of them
      were used for complex items like array with inter memory
      allocation calls what should cause GPF when GC is
      automatically activated by MM.
    % eliminated unnecessary __HARBOUR__/__XHARBOUR__ branches
      which can be covered by macros defined in compat.h
    * pacified few warnings
    ; added TOFIX note before code calling HB_JSONDECODE().
      Without any doubts this code does not work correctly.
      It has to be fixed by implementing proper passing
      by reference in C code or by small PRG function used
      as wrapper, i.e.:
         func SR_FROMJSON( cText )
            local xResult
            HB_JSONDECODE( cText, @xResult )
         return xResult

  * xHarbour-SQLRDD/source/sqlrdd.hbx
    * regenerated automatically with new PRG functions added
      after my last commit

2012-01-15 20:45 UTC-0300 Luiz Rafael Culik <luiz@xharbour.com.br>   
  * source/sqlrdd1.c
    source /sqlex1.c
     ! hb_cdpnTranslate and hb_cdpTranslate  changes to hb_cdpndup2 and hb_cdpnDup
     
2012-01-12 14:52 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * xHarbour-SQLRDD/source/sqlrdd0.prg
    * replaced #include "xhb.ch" with REQUEST XHB_LIB

  * xHarbour-SQLRDD/source/sqlsrodbc.c
    * casting to pacify warning

2012-01-12 10:53 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  + xHarbour-SQLRDD/source/compat.h
    + added header file which includes commonly used Harbour and xHarbour
      core header files and defines some macros to hide diferences between
      both compilers.

  + xHarbour-SQLRDD/source/compat.c
    + added file with some missing functions necessary for compatibility
      (Now only TraceLog() for Harbour was added).

  * xHarbour-SQLRDD/source/compat.ch
    + added #include "hbcompat.ch"

  * xHarbour-SQLRDD/source/exprobjs.prg
  * xHarbour-SQLRDD/source/exprparser.prg
  * xHarbour-SQLRDD/source/exprsimpl.prg
  * xHarbour-SQLRDD/source/exprtransl.prg
  * xHarbour-SQLRDD/source/exprudf.prg
  * xHarbour-SQLRDD/source/sqlgen1.prg
  * xHarbour-SQLRDD/source/sqlrdd2.prg
  * xHarbour-SQLRDD/source/utils.prg
    + added #include "compat.ch"
    * enclose in parentheses expressions with LIKE operator for
      compatibility with hbcompat.ch PP rules.
    * replaced IN operator with $

  * xHarbour-SQLRDD/source/sqlgen1.prg
    * replaced GLOBALs bTableInfo and bIndexInfo with STATICs
      They were used only locally - have you documented these vars
      as public API

  * xHarbour-SQLRDD/source/sqlprototypes.h
  * xHarbour-SQLRDD/source/sqlrdd0.prg
  * xHarbour-SQLRDD/source/utilslang.prg
    * eliminated GLOBAL variables
    * changed sr_get*()/sr_set*() PRG and C functions to work without
      global items
    ; this modification fixed potential RTE or even GPF when wrong
      parameters are passed to SR_SET*() functions

  * xHarbour-SQLRDD/source/sqlconnection.prg
    * renamed PUBLIC: => EXPORTED:

  * xHarbour-SQLRDD/source/exprrelation.prg
    + added #include "compat.ch"
    + added #include "xhbcls.ch" in Harbour builds

  * xHarbour-SQLRDD/source/sqlnames.prg
    * disabled in Harbour builds

  * xHarbour-SQLRDD/source/hbsql.h
    % added missing 'const' to some char* declarations
      It fixes warnings in code using them and allows to eliminate
      unnecessary castings.

  * xHarbour-SQLRDD/source/firebird.c
  * xHarbour-SQLRDD/source/mysql.c
  * xHarbour-SQLRDD/source/pgs.c
  * xHarbour-SQLRDD/source/sqlact.c
  * xHarbour-SQLRDD/source/sqlex.h
  * xHarbour-SQLRDD/source/sqlex1.c
  * xHarbour-SQLRDD/source/sqlex2.c
  * xHarbour-SQLRDD/source/sqlex3.c
  * xHarbour-SQLRDD/source/sqllex.c
  * xHarbour-SQLRDD/source/sqlora.h
  * xHarbour-SQLRDD/source/sqlora.c
  * xHarbour-SQLRDD/source/sqlorax.c
  * xHarbour-SQLRDD/source/sqlrdd1.c
  * xHarbour-SQLRDD/source/sqlsrodbc.c
    * use compat.h instead of hb*.h files
      (BTW some of the should not be included explicitly)
    - removed some old compatibility macros which are not longer
      necessary (they are covered by macros in compat.h)
    ! replaced NULL(s) wrongly used instead of 0
    ! fixed and synced with format strings parameters passed to sprintf()
      functions
    ! fixed buffer overflow in datetime buffer
      I do not know what is the format of datetime strings returned by FB
      but for me the conversion code is wrong - I do not believe that there
      is no delimiter between day and hour numbers
    + added support for datetime/timstamp conversions in Harbour builds
    % added missing 'const' to some char* declarations
    * updated to work with modified sr_get*Lang() C functions
    * updated to compile with Harbour and xHarbour
    * removed some unnecessary castings - redundant casting does not help
      but can hide serious problems or even create some new ones
    * use API functions to eliminate direct access to HVM internals like
      HB_ITEM structures - still it's a work in progress
    % eliminated some unnecessary item allocations
    * use hb_objSendMessage() instead of hb_objSendSymbol()
    * added support for CP translations in Harbour builds
      Warning: some of xHarbour only code has to be fixed because
               it may corrupt internal HVM strings changing directly
               HB_ITEM string buffers.
    ! do not redefine __STDC__ in GCC builds - IMHO it's fatal idea in
      any builds because it may strongly interact with system header files

  * xHarbour-SQLRDD/source/sqlrdd.h
    ! removed unnecessary static function declarations from commonly used
      header file

   ; all these modifications allow to compile SQLRDD using xHarbour and
     Harbour compilers. I made only compile time tests so now please try
     to make runtime tests with real RDBMS using Harbour and xHarbour
     (to test potential regression problems).
     Harbour applications have to be linked yet with XHB and HBCT
     libraries and it should be eliminated from the final product.
   ; TODO:
      - update code to work without hbvmint.h Harbour header files.
        This header allows to access HVM internals and should not be
        used by RDD libraries. Using HVM internals directly causes
        that library has to be recompiled after each modification
        touching HVM structures.
      - eliminate HBCT dependencies: ATREPL(), CHARLIST()
      - move support for HBXML from sqlrdd2.prg to separate file and
        make it fully optional so it can be replaced by other low level
        XML engine, i.e. Harbour supports EXPAT and MINIXML which seems
        to be better alternatives then TXML class which in Harbour is
        part of XHB library.
      - update PRG code so it can work without xHarbour extenssions which
        are not covered by hbcompat.ch. Mostly [] used to access string
        items. This will allow to eliminate XHB library from Harbour
        builds.

  + xHarbour-SQLRDD/source/sqlrdd.hbp
    + added HBMK2 build/make file
  + xHarbour-SQLRDD/source/hbmk2_bison.hbs
    + added HBMK2 plugin for bison files - thanks to Viktor.

  + xHarbour-SQLRDD/source/sqlrdd.hbx
    + added automatically generated by HBMK2 list of PRG level functions
      which allows to create dynamic libraries which automatically
      register all PRG level functions in HVM. This file can be used also
      to force linking all SQLRDD functions with final executbale and
      crate HRB or dynamic libraries (.DLL/.so/...) which uses dynamic
      bindings to SQLRDD functions.

2012-01-03 19:10  UTC-0300 Luiz Rafael Culik <luiz@xharbour.com.br>   
   ! dll\libeay32.dll
   ! dll\libiconv-2.dll
   ! dll\libpq.dll
   ! dll\ssleay32.dll
     ! updated postgresql client dll to version 9.0.4
   ! lib\BC5\libpq.lib
     ! updated import library to reflect dll change
   ! source\pgs.c
   ! source\sqlorax.c     
     ! fixes to timestamp support
   ! source\firebird.c
   ! source\mysql.c
   ! source\sqlex1.c
   ! source\sqlex2.c
   ! source\sqlex3.c
   ! source\sqlsrodbc.c
     ! added support to timestamp fields for firebird, mysql and sqlserver 2008 or newer 
   
   ! source\sqlact.c
     ! added support to timestamp fields to SR_itemEmpty function
   ! source\sqlconnection.prg
     ! fixes SQLType function to correct return the field type for date and datetime fields
   ! source\sqlfirebird.prg
   ! source\sqlodbc.prg      
   ! source\sqlrdd0.prg
   ! source\sqlrdd2.prg
   
   ! source\sqlprototypes.h
     ! added new prototypes 


2011-09-30 15:00  UTC-0300 Luiz Rafael Culik <luiz@xharbour.com.br>   
   ! dll\fbclient.dll
     ! updated to firebird 2.1 dll
   ! lib\fbclient_ms.lib
     ! updated to firebird 2.1 
   ! lib\fbclient_bc.lib
     ! updated to firebird 2.1   
   ! source\firebird.c
     ! updated to use firebird 2.x fb_interpret insted on unsafe isc_interprete as per firebird 2.x docs
   ! source\ibase.h
   ! source\iberror.h
     ! updated to firebird 2.1 header files
   ! source\sqlfirebird.prg
     ! fixes commit method that sometime was not commiting properly
   ! source\sqlrdd0.prg
     ! added an missed commit in SR_ExistTable() function


2011-08-26 23:00 UTC-0300 Luiz Rafael Culik <luiz@xharbour.com.br>   
   ! source/sqlex.h
     ! added bIsSelect member to SQLEXAREA structure
   ! source/sqlex1.c
     ! fixed createRecodListQuery function to proper generate query when using query in dbusearea function
     ! fixed getMissingColumn function to proper generate query when using query in dbusearea function
     ! fixed updateRecordBuffer function to proper generate query when using query in dbusearea function as also to recreate the thiswa->hStmtBuffer member if is null
     ! updated _hb_sqlEx_rdd_init_ to use same way to register normal rdds with xharbour
   ! source/sqlorax.c
     ! added an missing return on ORACLEPREPARE function
   ! source/sqlrdd0.prg
     source;sqlodbc.prg
     ! added test for azure database
   ! source/sqlconnection.prg
     ! added lclustered member to class and test for azure database
   ! source/sqlrdd.ch
     ! added define for azure database
   ! source/sqlrdd1.c
     ! updated _hb_sqlrdd_rdd_init_to use same way to register normal rdds with xharbour
   ! source/sqlrdd2.prg
     ! added define for azure database
     ! fixed reset sequence for postgresql
   ! source/utils.prg
     ! added define for azure database
   ! source/sqlpgs.prg
     ! added support for postgresql 9.1


2011-06-05 18:02 UTC-0300 Luiz Rafael Culik <luiz@xharbour.com.br>   
   ! source/sqlprototypes.h
     ! added missing prototype for sr_lSerializeArrayAsJson()
     
2011-05-25 07:02 UTC-0300 Luiz Rafael Culik <luiz@xharbour.com.br>   
   ! source/sqlex2.c
     ! fixed generation of sr_recno in multiple connection under sqlserver
   ! source/sqlrdd2.prg
     ! updated sqlzap method to reset sequence number under postgresql
       
2011-05-15 10:50 UTC-0300 Luiz Rafael Culik <luiz@xharbour.com.br>   
   ! source/sqlrdd2.prg
     ! fixed generation of sr_recno in multiple connection  under sqlserver
     
2011-05-01 15:00 UTC-0300 Luiz Rafael Culik <luiz@xharbour.com.br>   
   ! source/sqlrdd1.c
     ! Fixed some memory leaks that can cause apps slow and huge memory consume
   ! source/mysql.c  
     ! correct to call mysql_library_load and mysql_library_free
     
2011-03-30 20:30 UTC-0300 Luiz Rafael Culik <luiz@xharbour.com.br>   
   ! source/sqlrdd2.prg
     ! added support for datetime field for postgresql and oracle, type for this field is T
     ! move function responsable from converting arrays into xml and vice versa from sqlpgs.prg 
   ! source/sqlpgs.prg  
     - functions for converting arrays into xml and vice versa from sqlpgs.prg 
   ! source/pgs.c
     ! added support for datetime fields
   ! source/sqlorax.c
     ! added support for datetime fields
   ! source/sqlrdd1.c
     source/utils.prg
     source/sqlodbc.ch
     source/sqlconnection.prg
     ! added code to support datetime field under postgresql and oracle
               
2011-03-30 22:10 UTC-0300 Luiz Rafael Culik <luiz@xharbour.com.br>   
   ! source/firebird.c
   ! source/mysql.c   
   ! source/sqlsrodbc.c
   ! source/sqlorax.c
     ! added support to decode json arrays
   ! source/pgs.c     
      ! added support to decode json arrays
      ! added support to decode xml data as array   
   ! source/sqlpgs.prg
     ! added code to suport xml field types
   ! source/sqlrdd0.prg
     ! added need code to suport xml field types and settings
   ! source/sqlrdd1.c
   ! source/sqlrdd2.prg
     ! added support to xml fields in postgresql, and encoding arrays in json format is SR_SetSerializeArrayAsJson() is set to true ( default is false )
   
2011-03-22 21:30 UTC-0300 Luiz Rafael Culik <luiz@xharbour.com.br>
   ! source/sqlex1.c
     ! fixed minor memory leak when monting filters
     ! added detection for sqlserver >=8.x
   ! source/sqlconnection.prg
     ! added new members to class to allow postgresql use ssl connection
   ! source/sqlpgs.prg
     ! added code to allow ssl connection
   ! source/sqlrdd2.prg
     ! when creating the index for sr_recno key under sqlserver, is the server support clustered index, this index will be clustered

2011-03-22 17:30 UTC-0430 Ron Pinkas <ron.pinkas/at/xharbour.com>
   ! source\sqlex1.c
   ! source\sqlrdd1.c
     ! Fixed MSVC missing external loadTagDefault()

2011-03-03 21:00 UTC-0300 Luiz Rafael Culik <luiz@xharbour.com.br>
   ! source/utils.prg
     ! added SR_SetFieldDefault() to set field default under postgresql ( work in progress for other databases)

2011-03-03 20:20 UTC-0300 Luiz Rafael Culik <luiz@xharbour.com.br>
   ! source/sqlrdd2.prg
     ! fix on AlterColumns when converting numeric field to char under postgresql
   ! source/sqlrdd0.prg
     ! change SR_RenameTable() to rename sequence to new table name under postgresql and oracle
     !TEMP_DROP_COL -> TEMPDROPCO   to respect alias name to 10 chars

2011-01-27 21:20 UTC-0300 Luiz Rafael Culik <luiz@xharbour.com.br>
   ! source/sqlrdd2.prg
     ! in createtable method added logic to detect mysql 5.5 since it use engine=innodb insted of type=innodb
     ! added logic in AlterColumnsDirect method to allow convertion from char to numeric field
   ! source/firebird.c
     ! changed FBCREATEDB to dont lock database upon created is success fully created . Sugested by marson de paula
   ! source/utils.prg
     ! added logic in sr_changestruct method to allow convertion from char to numeric field

2010-10-11 14:25  UTC-0300 Luiz Rafael Culik <luiz@xharbour.com.br>
   ! source/pgs.c
     ! added  SETPGSOLDBEHAVIOR() to set postgresql behavior ( default .f. which means use null fields when applied)

2010-09-26 13:30  UTC-0300 Luiz Rafael Culik <luiz@xharbour.com.br>
   ! source/sqlrdd2.prg
     ! fixed seek when key is val(field)
   ! source/pgs.c
     ! minor clean up
   ! source/utils.prg
     ! fixed undeclared variable

2010-08-25 20:30 UTC-0300 Luiz Rafael Culik <luiz@xharbour.com.br>
   ! source/pgs.c
     ! fix to nullable  detection ( was inverted )

2010-08-04 19:30 UTC-0300 Luiz Rafael Culik <luiz@xharbour.com.br>
   ! source/sqlrdd0.prg
     ! fixed drop of indkex_xxx in SR_DropIndex()

2010-08-04 19:30 UTC-0300 Luiz Rafael Culik <luiz@xharbour.com.br>
   ! source/sqlrdd1.c
     + Sr_SetFound() function
   ! source/sqlrdd2.prg
     ! fixed seek last
     ! fixed orddestroy support
   ! source/sqlrdd0.prg
     ! minor fix to sr_dropindex

2010-07-25 14:00  UTC-0300 Luiz Rafael Culik <luiz@xharbour.com.br>
   ! source/pgs.c
     ! minor fix to nullable field detection

2010-07-13 23:13 UTC-0300 Luiz Rafael Culik <luiz@xharbour.com.br>
   ! source/sqlex1.c
   ! source/sqlex2.c
   ! source/sqlex3.c
       ! some fixes on seeks and order setting
       ! implemented sr_setfilter
       changes for use the new INDEXBINDP * IndexBindings
   ! source/sqlex.h
     !changed  INDEXBINDP IndexBindings[MAX_INDEXES] to  INDEXBINDP * IndexBindings for better memory usage
   ! source/sqlsrodbc.c
     ! changed all fix arrays initialization to {0}
   ! source/sqlrdd1.c
     ! change all HB_ITEM xxx to PHB_ITM xxx and commented out usage os  xxx.type = HB_IT_NIL;
   ! source/sqlrdd2.prg]
     ! under sqlex, we need to get the indkey_xxx field

2010-07-12 19:13 UTC-0300 Luiz Rafael Culik <luiz@xharbour.com.br>
   ! source/utils.prg
     + functions sr_AddToFilter()  to add an recno to existing filter  and sr_clearFilter() to clear this recno filter
   ! source/sqlrdd2.prg
     ! Added support for recno filters
     ! fixed QuotedNull() method to return null values where need under postgresql
   ! source/pgs.c
     ! fixed PGSTABLEATTR() to correct check if field is nullable

2010-06-21 23:45 UTC-0300 Luiz Rafael Culik <luiz@xharbour.com.br>
   ! source/sqlex1.c
     ! fixed orddescend support

2010-06-19 10:45 UTC-0300 Luiz Rafael Culik <luiz@xharbour.com.br>
   ! source/sqlpgs.prg
     ! added support for postgresql 9.0

2010-06-18 16:10 UTC-0300 Luiz Rafael Culik <luiz@xharbour.com.br>
   ! source/sqlex1.c
     ! fixed some memory init buffer initialize to 0 ( memset( buffer,0,buffersize)
     ! HB_ITEM xxx -> PHB_ITEM ccc
   ! source/sqlsrodbc.c
     ! buffer initialize to 0 ( memset( buffer,0,buffersize)


2010-06-17 21:40 UTC-0300 Luiz Rafael Culik <luiz@xharbour.com.br>
   ! source/sqlex1.c
     ! fixed buffer problem on getColumnList()
   ! source/sqlsrodbc.c
     ! fixed problem when  data is an real large string on odbcFieldGet()

2010-06-15 15:20 UTC-0300 Luiz Rafael Culik <luiz@xharbour.com.br>
   ! source/sqlex2.c
     ! fixed ResolveSpecialCols() function that on some cases was not updating indkey_xxx coluns

2010-06-15 18:34 UTC-0300 Luiz Rafael Culik <luiz@xharbour.com.br>
   ! source/sqlex2.c
     ! fixed ResolveSpecialCols() function that on some cases was not updating indkey_xxx coluns
   ! source/sqlrdd2.prg
     ! updated oracle hits to use First_rows_xxxxx when oracle version is >=9

2010-06-11 10:40 UTC-0300 Luiz Rafael Culik <luiz@xharbour.com.br>
   ! source/sqlrdd2.prg
     ! fixed oracle otimizer hint ( was " /* + FIRST_ROWS(1) */ "  , correct according to oracle docs (" /*+ FIRST_ROWS(1) */ "

2010-06-06 23:30 UTC-0300 Luiz Rafael Culik <luiz@xharbour.com.br>
   ! source/sqlex1.c
     + getMessagePtr() function due change of odbc to use pointer type
   ! source/sqlex2.c
     ! fixed problem on ResolveSpecialCols() function that was incorrectly getting the arrays values
   ! source/sqlconnection.prg
     ! some change on handles init to nil insted of 0 ( due change for pointer values on odbc)
   ! source/sqlsrodbc.c
   ! source/sqlodbc.prg
     ! change odbc code to use pointers( hb_retptr (void*) data) insted of long values ( hb_retnl((LONG) Data) ), for better 64 bits support

2010-06-06 13:31 UTC+0100 Patrick Mast <patrick.mast@xHarbour.com>
   ! IsSQLWorkarea(), added "SQLEX" to the search string.

2010-04-12 22:14 UTC-0300 Luiz Rafael Culik <luiz@xharbour.com.br>
   ! source/sqlrdd2.prg
     ! fix DropColRules() method to remove firebird desceding index

2010-03-02 19:24 UTC-0300 Luiz Rafael Culik <luiz@xharbour.com.br>
   ! source/firebird.c
     ! fixed return values for double/float values

2010-02-18 16:24 UTC-0300 Luiz Rafael Culik <luiz@xharbour.com.br>
   ! source/sqlrdd2.prg
     ! changed @@indentify with IDENT_CURRENT which is the recomended way to get the result of identify field
     ! fixed to altertabledirect under postgres

2010-02-09 23:10 UTC-0300 Luiz Rafael Culik <luiz@xharbour.com.br>
   ! source/sqlrdd2.prg
     ! fix when column type of the index if logical
   ! source/utils.prg
     ! minor change to SR_SubQuoted to change same values as method ::quoted() under logical fields

2010-01-21 08:30 UTC-0300 Luiz Rafael Culik <luiz@xharbour.com.br>
   ! Changelog
   * ! renamed to Changelog.001 and started an new one
   * source/sqlrdd2.prg
     source/utils.prg
      ! updated sr_changestruct() to do direct alter column, if changing column is same type and field len is granter then original size
